<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mascot Race</title>
  <style>
    body { margin:0; background:#111; color:#fff; font-family:sans-serif; }
    header { padding:10px; background:#222; display:flex; gap:10px; align-items:center; }
    button { padding:8px 14px; border:none; border-radius:6px; cursor:pointer; }
    button.primary { background:#e53935; color:#fff; }
    button.secondary { background:#555; color:#fff; }
    canvas { display:block; width:100%; height:80vh; background:#0c0e12; }
    #winner { padding:10px; font-size:20px; font-weight:bold; text-align:center; }
  </style>
</head>
<body>
  <header>
    <span>üèÅ Mascot Race</span>
    <button id="race30">30s</button>
    <button id="race45" class="primary">45s</button>
    <button id="race60">60s</button>
    <button id="start" class="secondary">Start Race</button>
  </header>
  <canvas id="track"></canvas>
  <div id="winner"></div>
<script>
  const mascots = [
    { id:"blooper",  name:"Blooper",   img:"assets/blooper.png",  color:"#e91e63" },
    { id:"uga",      name:"Uga",       img:"assets/uga.png",      color:"#d32f2f" },
    { id:"hairyhawk",name:"Hairy Hawk",img:"assets/hairyhawk.png",color:"#f44336" },
    { id:"freddie",  name:"Freddie",   img:"assets/freddie.png",  color:"#ff7043" }
  ];

  let duration = 45; // default
  let canvas = document.getElementById('track');
  let ctx = canvas.getContext('2d');
  let racers = [];
  let running = false;
  let startedAt;

  function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight * 0.8;
  }
  window.addEventListener('resize', resize);
  resize();

  class Racer {
    constructor(m, lane){
      this.m = m;
      this.lane = lane;
      this.img = new Image();
      this.img.src = m.img;
      this.progress = 0;
      this.base = 1 / duration * (0.95 + Math.random()*0.1);
    }
    step(dt){ this.progress += this.base * dt; }
    draw(){
      const laneHeight = canvas.height / mascots.length;
      const y = this.lane*laneHeight + laneHeight/2 - 40;
      const x = 80 + (canvas.width-160-80) * Math.min(this.progress,1);
      ctx.drawImage(this.img, x, y, 80, 80);
    }
  }

  function drawTrack(){
    ctx.fillStyle = '#0b0c10';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    const laneHeight = canvas.height / mascots.length;
    for(let i=0;i<mascots.length;i++){
      ctx.strokeStyle = '#444';
      ctx.beginPath();
      ctx.moveTo(0, i*laneHeight);
      ctx.lineTo(canvas.width, i*laneHeight);
      ctx.stroke();
    }
    ctx.strokeStyle = '#888';
    ctx.beginPath();
    ctx.moveTo(canvas.width-100, 0);
    ctx.lineTo(canvas.width-100, canvas.height);
    ctx.stroke();
  }

  function startRace(){
    racers = mascots.map((m,i)=> new Racer(m,i));
    startedAt = performance.now();
    running = true;
    requestAnimationFrame(tick);
  }

  function tick(){
    if(!running) return;
    drawTrack();
    const now = performance.now();
    const elapsed = (now - startedAt)/1000;
    const dt = 1/60;
    racers.forEach(r => r.step(dt));
    racers.forEach(r => r.draw());

    if(elapsed >= duration){
      running = false;
      racers.sort((a,b)=> b.progress - a.progress);
      document.getElementById('winner').textContent = `üèÜ Winner: ${racers[0].m.name}`;
    } else {
      requestAnimationFrame(tick);
    }
  }

  document.getElementById('race30').onclick=()=>{duration=30;};
  document.getElementById('race45').onclick=()=>{duration=45;};
  document.getElementById('race60').onclick=()=>{duration=60;};
  document.getElementById('start').onclick=startRace;
</script>
</body>
</html>
